---
layout: post
title: Java虚拟机类加载机制
comments: true
author: "Yin Haomin"
tags:
    - 类加载
    - 理解
    - 
    - 
---

总结一下虚拟机加载类的机制。<br>

#### 1. 类加载的过程
![gras](/images/loadclass/类的加载过程.png)<br>

#### 2. 类的加载
(1). 类被加载的场景<br>
    A). 在遇到new,getstatic,putstatic,invokemethod的时候<br>
    B). 在遇到反射新建Class的时候<br>
    C). 在子类被加载，但是父类没有被加载的时候<br>
    D). 在程序启动时，指定了启动函数的时候<br>
    E). 在Java 7以后，使用MethodHandle时，遇到相关的类没有被加载的时候<br>
(2). 类不会被加载的特殊场景<br>
    A). 当类中的final static String的变量被调用的时候，因为此变量在编译时已经写入了常量池，所以调用此变量不会加载类。<br>
    B). 在子类中调用父类的变量(非final static String)，子类不会被实例化，仅仅父类会被实例化。<br>
    C). 新建类的数组时，不是对类的初始化，而是对[L类]的初始化，这个类是虚拟机生成的，继承于Object的一个类。<br>

#### 3. 类的
