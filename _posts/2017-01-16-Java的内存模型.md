---
layout: post
title: Java的内存模型
comments: true
author: "Yin Haomin"
tags:
    - 内存模型
    - 内存
    - 原子
---

来总结下Java的内存模型。Java虚拟机规范中试图定义一种Java内存模型[1]（Java Memory Model,JMM）来屏蔽掉各种硬件和操作系统的内存访问差异，以实现让Java程序在各种平台下都能达到一致的内存访问效果。<br>
Java内存模型的主要目标是定义程序中各个变量的访问规则，即在虚拟机中将变量存储到内存和从内存中取出变量这样的底层细节。<br>
在Java的内存模型中，将内存分为主内存和工作内存。

#### 1. 内存间交互操作
Java内存模型中定义了以下8种操作来完成，虚拟机实现时必须保证下面提及的每一种操作都是原子的、 不可再分的（对于double和long类型的变量来说，load、 store、 read和write操作在某些平台上允许有例外。<br>

|方法|含义|适用区域|作用|Re|
|:-------|:-------|:-------|:-------|:-------|
|lock|锁定|主内存|一个变量标识为一条线程独占的状态|-|
|unlock|锁定|主内存|它把一个处于锁定状态的变量释放出来，释放后的变量才可以被其他线程锁定。|-|
|read|读取|主内存|将主内存数据读取出来，供load使用|-|
|load|载入|工作内存|将读取出来的数据加载到工作内存|-|
|use|使用|工作内存|将数据传给执行引擎|-|
|assign|赋值|工作内存|执行引擎将数据写入工作内存|-|
|store|赋值|工作内存|工作内存往主内存传输数据|-|
|write|写入|主内存|将工作内存的变量写回主内存|-|

#### 2. volatile
(1). 实现同步的方式是数据更改后，立即写回到主内存，但是依然会有不同步。
(2). 
