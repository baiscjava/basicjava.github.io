---
layout: post
title: 总结一下锁
comments: true
author: "Yin Haomin"
tags:
    - 锁
    - 总结
---

开发到处用到锁，从Java的多线程，到mysql的读写。想写篇文章总结总结了。<br>
#### 什么是锁?<br>
锁代表着计算资源的独占和排他。是在计算机资源多线程调用时，解决资源调用问题的解决方案。<br>

#### 锁的分类<br>
1. 从加锁以后，是否能够重复读这个角度看可以分为:<br>
(1) 共享锁【S锁】<br>
又称读锁，若事务T对数据对象A加上S锁，则事务T可以读A但不能修改A，其他事务只能再对A加S锁，而不能加X锁，直到T释放A上的S锁。<br>
这保证了其他事务可以读A，但在T释放A上的S锁之前不能对A做任何修改。<br>
(2) 排他锁【X锁】<br>
又称写锁。若事务T对数据对象A加上X锁，事务T可以读A也可以修改A，其他事务不能再对A加任何锁，直到T释放A上的锁。<br>
这保证了其他事务在T释放A上的锁之前不能再读取和修改A。<br>

2. 对于一个处理的乐观和悲观上来分，可以分为乐观锁和悲观锁<br>
(1) 乐观锁<br>
乐观锁（ Optimistic Locking）其实是一种思想。相对悲观锁而言，乐观锁假设认为数据一般情况下不会造成冲突，所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做。<br>
上面提到的乐观锁的概念中其实已经阐述了他的具体实现细节：主要就是两个步骤：冲突检测和数据更新。其实现方式有一种比较典型的就是Compare and Swap(CAS)。<br>
(2) 悲观锁<br>
悲观锁(Pessimistic Lock), 顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会block直到它拿到锁。传统的关系型数据库里边就用到了很多这种锁机制，比如行锁，表锁等，读锁，写锁等，都是在做操作之前先上锁。<br>

#### 参考资料
1. [乐观锁的一种实现方式——CAS](http://www.importnew.com/20472.html)<br>
