---
layout: post
title: Java的线程池
comments: true
author: "Yin Haomin"
tags:
    - 线程池
    - 代理模式
---

线程池，这个东东用的多，被别人考的多，我们来总结下。<br>

#### 1. ThreadPoolExecutor详解

```
public ThreadPoolExecutor(int corePoolSize,
                          int maxPoolsize,
                          long keepAliveTime,
                          TimeUnit unit,
                          BlockingQueue<Runnable> workQueue,
                          ThreadFactory threadFactory,
                          RejectedExecutionHandler handler){
       if (corePoolSize < 0 ||
            maximumPoolSize <= 0 ||
            maximumPoolSize < corePoolSize ||
            keepAliveTime < 0)
            throw new IllegalArgumentException();
        if (workQueue == null || threadFactory == null || handler == null)
            throw new NullPointerException();
        this.corePoolSize = corePoolSize;
        this.maximumPoolSize = maximumPoolSize;
        this.workQueue = workQueue;
        this.keepAliveTime = unit.toNanos(keepAliveTime);
        this.threadFactory = threadFactory;
        this.handler = handler;
}
```

|参数|含义|
|:-------|:-------|
|corePoolSize|当线程数小于corePoolSize的时候，无论是否有空闲线程，都新建线程运行|
|workQueue|当线程数大于等于corePoolSize，如果workQueue未满，则将数据放在workQueue中|
|keepAliveTime|当线程数大于等于corePoolSize，如果等待时间大于了keepAliveTime，就将此线程回收|
|unit|keepAliveTime的时间单位|
|maxPoolSize|当线程数大于等于corePoolSize，workQueue已经满了，并小于maxPoolSize的时候，新建线程运行|
|threadFactory|指定新建Thread的Factory|
|RejectedExecutionHandler|线程不能提交的handler|




